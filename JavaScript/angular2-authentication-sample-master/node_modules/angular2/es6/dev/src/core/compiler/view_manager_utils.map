{"version":3,"sources":["view_manager_utils.js"],"names":[],"mappings":"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","file":"angular2/src/core/compiler/view_manager_utils.es6","sourcesContent":["import {Injectable, Injector, Binding} from 'angular2/di';\nimport {ListWrapper, MapWrapper, Map, StringMapWrapper, List} from 'angular2/src/facade/collection';\nimport * as eli from './element_injector';\nimport {isPresent, isBlank, BaseException} from 'angular2/src/facade/lang';\nimport {NgElement} from 'angular2/src/core/compiler/ng_element';\nimport * as viewModule from './view';\nimport * as avmModule from './view_manager';\nimport {Renderer} from 'angular2/src/render/api';\nimport {BindingPropagationConfig, Locals} from 'angular2/change_detection';\nimport {DirectiveMetadataReader} from './directive_metadata_reader';\n\n@Injectable()\nexport class AppViewManagerUtils {\n  _metadataReader:DirectiveMetadataReader;\n\n  constructor(metadataReader:DirectiveMetadataReader) {\n    this._metadataReader = metadataReader;\n  }\n\n  createView(protoView:viewModule.AppProtoView, viewManager:avmModule.AppViewManager, renderer:Renderer): viewModule.AppView {\n    var view = new viewModule.AppView(renderer, protoView, protoView.protoLocals);\n    var changeDetector = protoView.protoChangeDetector.instantiate(view, protoView.bindings,\n      protoView.getVariableBindings(), protoView.getdirectiveRecords());\n\n    var binders = protoView.elementBinders;\n    var elementInjectors = ListWrapper.createFixedSize(binders.length);\n    var rootElementInjectors = [];\n    var preBuiltObjects = ListWrapper.createFixedSize(binders.length);\n    var componentChildViews = ListWrapper.createFixedSize(binders.length);\n\n    for (var binderIdx = 0; binderIdx < binders.length; binderIdx++) {\n      var binder = binders[binderIdx];\n      var elementInjector = null;\n\n      // elementInjectors and rootElementInjectors\n      var protoElementInjector = binder.protoElementInjector;\n      if (isPresent(protoElementInjector)) {\n        if (isPresent(protoElementInjector.parent)) {\n          var parentElementInjector = elementInjectors[protoElementInjector.parent.index];\n          elementInjector = protoElementInjector.instantiate(parentElementInjector);\n        } else {\n          elementInjector = protoElementInjector.instantiate(null);\n          ListWrapper.push(rootElementInjectors, elementInjector);\n        }\n      }\n      elementInjectors[binderIdx] = elementInjector;\n\n      // preBuiltObjects\n      if (isPresent(elementInjector)) {\n        var defaultProtoView = isPresent(binder.viewportDirective) ? binder.nestedProtoView : null;\n        preBuiltObjects[binderIdx] = new eli.PreBuiltObjects(viewManager, view, new NgElement(view, binderIdx), defaultProtoView);\n      }\n    }\n\n    view.init(changeDetector, elementInjectors, rootElementInjectors,\n      preBuiltObjects, componentChildViews);\n\n    return view;\n  }\n\n  attachComponentView(hostView:viewModule.AppView, boundElementIndex:number,\n      componentView:viewModule.AppView) {\n    var childChangeDetector = componentView.changeDetector;\n    hostView.changeDetector.addShadowDomChild(childChangeDetector);\n    hostView.componentChildViews[boundElementIndex] = componentView;\n  }\n\n  detachComponentView(hostView:viewModule.AppView, boundElementIndex:number) {\n    var componentView = hostView.componentChildViews[boundElementIndex];\n    hostView.changeDetector.removeShadowDomChild(componentView.changeDetector);\n    hostView.componentChildViews[boundElementIndex] = null;\n  }\n\n  hydrateComponentView(hostView:viewModule.AppView, boundElementIndex:number, injector:Injector = null) {\n    var elementInjector = hostView.elementInjectors[boundElementIndex];\n    var componentView = hostView.componentChildViews[boundElementIndex];\n    var binder = hostView.proto.elementBinders[boundElementIndex];\n    var component;\n    if (binder.hasDynamicComponent()) {\n      component = elementInjector.getDynamicallyLoadedComponent();\n    } else {\n      component = elementInjector.getComponent();\n    }\n    this._hydrateView(\n      componentView, injector, elementInjector, component, null\n    );\n  }\n\n  attachAndHydrateInPlaceHostView(parentComponentHostView:viewModule.AppView, parentComponentBoundElementIndex:number,\n      hostView:viewModule.AppView, injector:Injector = null) {\n    var hostElementInjector = null;\n    if (isPresent(parentComponentHostView)) {\n      hostElementInjector = parentComponentHostView.elementInjectors[parentComponentBoundElementIndex];\n      var parentView = parentComponentHostView.componentChildViews[parentComponentBoundElementIndex];\n      parentView.changeDetector.addChild(hostView.changeDetector);\n      ListWrapper.push(parentView.imperativeHostViews, hostView);\n    }\n    this._hydrateView(hostView, injector, hostElementInjector, new Object(), null);\n  }\n\n  detachInPlaceHostView(parentView:viewModule.AppView,\n      hostView:viewModule.AppView) {\n    if (isPresent(parentView)) {\n      parentView.changeDetector.removeChild(hostView.changeDetector);\n      ListWrapper.remove(parentView.imperativeHostViews, hostView);\n    }\n  }\n\n  attachViewInContainer(parentView:viewModule.AppView, boundElementIndex:number, atIndex:number, view:viewModule.AppView) {\n    parentView.changeDetector.addChild(view.changeDetector);\n    var viewContainer = parentView.viewContainers[boundElementIndex];\n    if (isBlank(viewContainer)) {\n      viewContainer = new viewModule.AppViewContainer();\n      parentView.viewContainers[boundElementIndex] = viewContainer;\n    }\n    ListWrapper.insert(viewContainer.views, atIndex, view);\n    var sibling;\n    if (atIndex == 0) {\n      sibling = null;\n    } else {\n      sibling = ListWrapper.last(viewContainer.views[atIndex - 1].rootElementInjectors)\n    }\n    var elementInjector = parentView.elementInjectors[boundElementIndex];\n    for (var i = view.rootElementInjectors.length - 1; i >= 0; i--) {\n      view.rootElementInjectors[i].linkAfter(elementInjector, sibling);\n    }\n  }\n\n  detachViewInContainer(parentView:viewModule.AppView, boundElementIndex:number, atIndex:number) {\n    var viewContainer = parentView.viewContainers[boundElementIndex];\n    var view = viewContainer.views[atIndex];\n    view.changeDetector.remove();\n    ListWrapper.removeAt(viewContainer.views, atIndex);\n    for (var i = 0; i < view.rootElementInjectors.length; ++i) {\n      view.rootElementInjectors[i].unlink();\n    }\n  }\n\n  hydrateViewInContainer(parentView:viewModule.AppView, boundElementIndex:number, atIndex:number, injector:Injector) {\n    var viewContainer = parentView.viewContainers[boundElementIndex];\n    var view = viewContainer.views[atIndex];\n    var elementInjector = parentView.elementInjectors[boundElementIndex];\n    this._hydrateView(view, injector, elementInjector, parentView.context, parentView.locals);\n  }\n\n  hydrateDynamicComponentInElementInjector(hostView:viewModule.AppView, boundElementIndex:number,\n      componentBinding:Binding, injector:Injector = null) {\n    var elementInjector = hostView.elementInjectors[boundElementIndex];\n    if (isPresent(elementInjector.getDynamicallyLoadedComponent())) {\n      throw new BaseException(`There already is a dynamic component loaded at element ${boundElementIndex}`);\n    }\n    if (isBlank(injector)) {\n      injector = elementInjector.getLightDomAppInjector();\n    }\n    var annotation = this._metadataReader.read(componentBinding.token).annotation;\n    var componentDirective = eli.DirectiveBinding.createFromBinding(componentBinding, annotation);\n    var shadowDomAppInjector = this._createShadowDomAppInjector(componentDirective, injector);\n    elementInjector.dynamicallyCreateComponent(componentDirective, shadowDomAppInjector);\n  }\n\n  _createShadowDomAppInjector(componentDirective, appInjector) {\n    var shadowDomAppInjector = null;\n\n    // shadowDomAppInjector\n    var injectables = componentDirective.resolvedInjectables;\n    if (isPresent(injectables)) {\n      shadowDomAppInjector = appInjector.createChildFromResolved(injectables);\n    } else {\n      shadowDomAppInjector = appInjector;\n    }\n    return shadowDomAppInjector;\n  }\n\n  _hydrateView(view:viewModule.AppView, appInjector:Injector, hostElementInjector:eli.ElementInjector, context: Object, parentLocals:Locals) {\n    if (isBlank(appInjector)) {\n      appInjector = hostElementInjector.getShadowDomAppInjector();\n    }\n    if (isBlank(appInjector)) {\n      appInjector = hostElementInjector.getLightDomAppInjector();\n    }\n    view.context = context;\n    view.locals.parent = parentLocals;\n    view.changeDetector.hydrate(view.context, view.locals, view);\n\n    var binders = view.proto.elementBinders;\n    for (var i = 0; i < binders.length; ++i) {\n      var elementInjector = view.elementInjectors[i];\n      if (isPresent(elementInjector)) {\n        var componentDirective = view.proto.elementBinders[i].componentDirective;\n        var shadowDomAppInjector = null;\n        if (isPresent(componentDirective)) {\n          shadowDomAppInjector = this._createShadowDomAppInjector(componentDirective, appInjector);\n        } else {\n          shadowDomAppInjector = null;\n        }\n        elementInjector.instantiateDirectives(appInjector, hostElementInjector, shadowDomAppInjector, view.preBuiltObjects[i]);\n        this._setUpEventEmitters(view, elementInjector, i);\n\n        // The exporting of $implicit is a special case. Since multiple elements will all export\n        // the different values as $implicit, directly assign $implicit bindings to the variable\n        // name.\n        var exportImplicitName = elementInjector.getExportImplicitName();\n        if (elementInjector.isExportingComponent()) {\n          view.locals.set(exportImplicitName, elementInjector.getComponent());\n        } else if (elementInjector.isExportingElement()) {\n          view.locals.set(exportImplicitName, elementInjector.getNgElement().domElement);\n        }\n      }\n    }\n\n  }\n\n  _setUpEventEmitters(view:viewModule.AppView, elementInjector:eli.ElementInjector, boundElementIndex:number) {\n    var emitters = elementInjector.getEventEmitterAccessors();\n    for (var directiveIndex = 0; directiveIndex < emitters.length; ++directiveIndex) {\n      var directiveEmitters = emitters[directiveIndex];\n      var directive = elementInjector.getDirectiveAtIndex(directiveIndex);\n\n      for (var eventIndex = 0; eventIndex < directiveEmitters.length; ++eventIndex) {\n        var eventEmitterAccessor = directiveEmitters[eventIndex];\n        eventEmitterAccessor.subscribe(view, boundElementIndex, directive);\n      }\n    }\n  }\n\n  dehydrateView(view:viewModule.AppView) {\n    var binders = view.proto.elementBinders;\n    for (var i = 0; i < binders.length; ++i) {\n      var elementInjector = view.elementInjectors[i];\n      if (isPresent(elementInjector)) {\n        elementInjector.clearDirectives();\n      }\n    }\n    if (isPresent(view.locals)) {\n      view.locals.clearValues();\n    }\n    view.context = null;\n    view.changeDetector.dehydrate();\n  }\n\n}"]}