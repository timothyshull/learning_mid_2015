{"version":3,"sources":["direct_dom_renderer.js"],"names":[],"mappings":"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","file":"angular2/src/render/dom/direct_dom_renderer.es6","sourcesContent":["import {Injectable} from 'angular2/di';\nimport {Promise, PromiseWrapper} from 'angular2/src/facade/async';\nimport {List, ListWrapper} from 'angular2/src/facade/collection';\nimport {isBlank, isPresent, BaseException} from 'angular2/src/facade/lang';\n\nimport * as api from '../api';\nimport {RenderView} from './view/view';\nimport {RenderProtoView} from './view/proto_view';\nimport {ViewFactory} from './view/view_factory';\nimport {RenderViewHydrator} from './view/view_hydrator';\nimport {Compiler} from './compiler/compiler';\nimport {ShadowDomStrategy} from './shadow_dom/shadow_dom_strategy';\nimport {ProtoViewBuilder} from './view/proto_view_builder';\nimport {DOM} from 'angular2/src/dom/dom_adapter';\nimport {ViewContainer} from './view/view_container';\n\nfunction _resolveViewContainer(vc:api.RenderViewContainerRef) {\n  return _resolveView(vc.view).getOrCreateViewContainer(vc.elementIndex);\n}\n\nfunction _resolveView(viewRef:DirectDomViewRef) {\n  return isPresent(viewRef) ? viewRef.delegate : null;\n}\n\nfunction _resolveProtoView(protoViewRef:DirectDomProtoViewRef) {\n  return isPresent(protoViewRef) ? protoViewRef.delegate : null;\n}\n\nfunction _wrapView(view:RenderView) {\n  return new DirectDomViewRef(view);\n}\n\nfunction _collectComponentChildViewRefs(view, target = null) {\n  if (isBlank(target)) {\n    target = [];\n  }\n  ListWrapper.push(target, _wrapView(view));\n  ListWrapper.forEach(view.componentChildViews, (view) => {\n    if (isPresent(view)) {\n      _collectComponentChildViewRefs(view, target);\n    }\n  });\n  return target;\n}\n\n\n\n// public so that the compiler can use it.\nexport class DirectDomProtoViewRef extends api.ProtoViewRef {\n  delegate:RenderProtoView;\n\n  constructor(delegate:RenderProtoView) {\n    super();\n    this.delegate = delegate;\n  }\n}\n\nexport class DirectDomViewRef extends api.ViewRef {\n  delegate:RenderView;\n\n  constructor(delegate:RenderView) {\n    super();\n    this.delegate = delegate;\n  }\n}\n\n@Injectable()\nexport class DirectDomRenderer extends api.Renderer {\n  _compiler: Compiler;\n  _viewFactory: ViewFactory;\n  _viewHydrator: RenderViewHydrator;\n  _shadowDomStrategy: ShadowDomStrategy;\n\n  constructor(\n      compiler: Compiler, viewFactory: ViewFactory, viewHydrator: RenderViewHydrator, shadowDomStrategy: ShadowDomStrategy) {\n    super();\n    this._compiler = compiler;\n    this._viewFactory = viewFactory;\n    this._viewHydrator = viewHydrator;\n    this._shadowDomStrategy = shadowDomStrategy;\n  }\n\n  createHostProtoView(componentId):Promise<api.ProtoViewDto> {\n    var rootElement = DOM.createElement('div');\n    var hostProtoViewBuilder = new ProtoViewBuilder(rootElement);\n    var elBinder = hostProtoViewBuilder.bindElement(rootElement, 'root element');\n    elBinder.setComponentId(componentId);\n    elBinder.bindDirective(0);\n\n    this._shadowDomStrategy.processElement(null, componentId, rootElement);\n    return PromiseWrapper.resolve(hostProtoViewBuilder.build());\n  }\n\n  createImperativeComponentProtoView(rendererId):Promise<api.ProtoViewDto> {\n    var protoViewBuilder = new ProtoViewBuilder(null);\n    protoViewBuilder.setImperativeRendererId(rendererId);\n    return PromiseWrapper.resolve(protoViewBuilder.build());\n  }\n\n  compile(template:api.ViewDefinition):Promise<api.ProtoViewDto> {\n    // Note: compiler already uses a DirectDomProtoViewRef, so we don't\n    // need to do anything here\n    return this._compiler.compile(template);\n  }\n\n  mergeChildComponentProtoViews(protoViewRef:api.ProtoViewRef, protoViewRefs:List<api.ProtoViewRef>) {\n    _resolveProtoView(protoViewRef).mergeChildComponentProtoViews(\n      ListWrapper.map(protoViewRefs, _resolveProtoView)\n    );\n  }\n\n  createViewInContainer(vcRef:api.RenderViewContainerRef, atIndex:number, protoViewRef:api.ProtoViewRef):List<api.ViewRef> {\n    var view = this._viewFactory.getView(_resolveProtoView(protoViewRef));\n    var vc = _resolveViewContainer(vcRef);\n    this._viewHydrator.hydrateViewInViewContainer(vc, view);\n    vc.insert(view, atIndex);\n    return _collectComponentChildViewRefs(view);\n  }\n\n  destroyViewInContainer(vcRef:api.RenderViewContainerRef, atIndex:number):void {\n    var vc = _resolveViewContainer(vcRef);\n    var view = vc.detach(atIndex);\n    this._viewHydrator.dehydrateViewInViewContainer(vc, view);\n    this._viewFactory.returnView(view);\n  }\n\n  insertViewIntoContainer(vcRef:api.RenderViewContainerRef, atIndex=-1, viewRef:api.ViewRef):void {\n    _resolveViewContainer(vcRef).insert(_resolveView(viewRef), atIndex);\n  }\n\n  detachViewFromContainer(vcRef:api.RenderViewContainerRef, atIndex:number):void {\n    _resolveViewContainer(vcRef).detach(atIndex);\n  }\n\n  createDynamicComponentView(hostViewRef:api.ViewRef, elementIndex:number, componentViewRef:api.ProtoViewRef):List<api.ViewRef> {\n    var hostView = _resolveView(hostViewRef);\n    var componentView = this._viewFactory.getView(_resolveProtoView(componentViewRef));\n    this._viewHydrator.hydrateDynamicComponentView(hostView, elementIndex, componentView);\n    return _collectComponentChildViewRefs(componentView);\n  }\n\n  destroyDynamicComponentView(hostViewRef:api.ViewRef, elementIndex:number):void {\n    throw new BaseException('Not supported yet');\n    // Something along these lines:\n    // var hostView = _resolveView(hostViewRef);\n    // var componentView = hostView.childComponentViews[elementIndex];\n    // this._viewHydrator.dehydrateDynamicComponentView(hostView, componentView);\n  }\n\n  createInPlaceHostView(parentViewRef:api.ViewRef, hostElementSelector, hostProtoViewRef:api.ProtoViewRef):List<api.ViewRef> {\n    var parentView = _resolveView(parentViewRef);\n    var hostView = this._viewFactory.createInPlaceHostView(hostElementSelector, _resolveProtoView(hostProtoViewRef));\n    this._viewHydrator.hydrateInPlaceHostView(parentView, hostView);\n    return _collectComponentChildViewRefs(hostView);\n  }\n\n  /**\n   * Destroys the given host view in the given parent view.\n   */\n  destroyInPlaceHostView(parentViewRef:api.ViewRef, hostViewRef:api.ViewRef):void {\n    var parentView = _resolveView(parentViewRef);\n    var hostView = _resolveView(hostViewRef);\n    this._viewHydrator.dehydrateInPlaceHostView(parentView, hostView);\n  }\n\n  setImperativeComponentRootNodes(parentViewRef:api.ViewRef, elementIndex:number, nodes:List):void {\n    var parentView = _resolveView(parentViewRef);\n    var hostElement = parentView.boundElements[elementIndex];\n    var componentView = parentView.componentChildViews[elementIndex];\n    if (isBlank(componentView)) {\n      throw new BaseException(`There is no componentChildView at index ${elementIndex}`);\n    }\n    if (isBlank(componentView.proto.imperativeRendererId)) {\n      throw new BaseException(`This component view has no imperative renderer`);\n    }\n    ViewContainer.removeViewNodes(componentView);\n    componentView.rootNodes = nodes;\n    this._shadowDomStrategy.attachTemplate(hostElement, componentView);\n  }\n\n  setElementProperty(viewRef:api.ViewRef, elementIndex:number, propertyName:string, propertyValue:any):void {\n    _resolveView(viewRef).setElementProperty(elementIndex, propertyName, propertyValue);\n  }\n\n  setText(viewRef:api.ViewRef, textNodeIndex:number, text:string):void {\n    _resolveView(viewRef).setText(textNodeIndex, text);\n  }\n\n  setEventDispatcher(viewRef:api.ViewRef, dispatcher:any/*api.EventDispatcher*/):void {\n    _resolveView(viewRef).setEventDispatcher(dispatcher);\n  }\n}\n"]}