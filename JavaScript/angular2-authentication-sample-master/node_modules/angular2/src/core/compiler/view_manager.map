{"version":3,"sources":["view_manager.js"],"names":[],"mappings":"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","file":"angular2/src/core/compiler/view_manager.js","sourcesContent":["import {Injector, Injectable, Binding} from 'angular2/di';\nimport {ListWrapper, MapWrapper, Map, StringMapWrapper, List} from 'angular2/src/facade/collection';\nimport {isPresent, isBlank, BaseException} from 'angular2/src/facade/lang';\nimport * as eli from './element_injector';\nimport * as viewModule from './view';\nimport {Renderer, ViewRef, RenderViewContainerRef} from 'angular2/src/render/api';\nimport {AppViewManagerUtils} from './view_manager_utils';\nimport {AppViewPool} from './view_pool';\n\n/**\n * Entry point for creating, moving views in the view hierarchy and destroying views.\n * This manager contains all recursion and delegates to helper methods\n * in AppViewManagerUtils and the Renderer, so unit tests get simpler.\n */\n@Injectable()\nexport class AppViewManager {\n  _viewPool:AppViewPool;\n  _utils:AppViewManagerUtils;\n  _renderer:Renderer;\n\n  constructor(viewPool:AppViewPool, utils:AppViewManagerUtils, renderer:Renderer) {\n    this._renderer = renderer;\n    this._viewPool = viewPool;\n    this._utils = utils;\n  }\n\n  createDynamicComponentView(hostLocation:eli.ElementRef,\n      componentProtoView:viewModule.AppProtoView, componentBinding:Binding, injector:Injector):viewModule.AppView {\n    var hostView = hostLocation.hostView;\n    var boundElementIndex = hostLocation.boundElementIndex;\n    var binder = hostView.proto.elementBinders[boundElementIndex];\n    if (!binder.hasDynamicComponent()) {\n      throw new BaseException(`There is no dynamic component directive at element ${boundElementIndex}`)\n    }\n\n    var componentView = this._createViewRecurse(componentProtoView);\n    var renderViewRefs = this._renderer.createDynamicComponentView(hostView.render, boundElementIndex, componentProtoView.render);\n    componentView.render = renderViewRefs[0];\n    this._utils.attachComponentView(hostView, boundElementIndex, componentView);\n    this._utils.hydrateDynamicComponentInElementInjector(hostView, boundElementIndex, componentBinding, injector);\n    this._utils.hydrateComponentView(hostView, boundElementIndex);\n\n    this._viewHydrateRecurse(componentView, renderViewRefs, 1);\n    return componentView;\n  }\n\n  createInPlaceHostView(parentComponentLocation:eli.ElementRef,\n      hostElementSelector, hostProtoView:viewModule.AppProtoView, injector:Injector):viewModule.AppView {\n    var parentComponentHostView = null;\n    var parentComponentBoundElementIndex = null;\n    var parentRenderViewRef = null;\n    if (isPresent(parentComponentLocation)) {\n      parentComponentHostView = parentComponentLocation.hostView;\n      parentComponentBoundElementIndex = parentComponentLocation.boundElementIndex;\n      parentRenderViewRef = parentComponentHostView.componentChildViews[parentComponentBoundElementIndex].render;\n    }\n    var hostView = this._createViewRecurse(hostProtoView);\n    var renderViewRefs = this._renderer.createInPlaceHostView(parentRenderViewRef, hostElementSelector, hostView.proto.render);\n    hostView.render = renderViewRefs[0];\n    this._utils.attachAndHydrateInPlaceHostView(parentComponentHostView, parentComponentBoundElementIndex, hostView, injector);\n    this._viewHydrateRecurse(hostView, renderViewRefs, 1);\n    return hostView;\n  }\n\n  destroyInPlaceHostView(parentComponentLocation:eli.ElementRef, hostView:viewModule.AppView) {\n    var parentView = null;\n    var parentRenderViewRef = null;\n    if (isPresent(parentComponentLocation)) {\n      parentView = parentComponentLocation.hostView.componentChildViews[parentComponentLocation.boundElementIndex];\n      parentRenderViewRef = parentView.render;\n    }\n    var hostViewRenderRef = hostView.render;\n    this._viewDehydrateRecurse(hostView);\n    this._utils.detachInPlaceHostView(parentView, hostView);\n    this._renderer.destroyInPlaceHostView(parentRenderViewRef, hostViewRenderRef);\n    this._destroyView(hostView);\n  }\n\n  createViewInContainer(viewContainerLocation:eli.ElementRef,\n      atIndex:number, protoView:viewModule.AppProtoView, injector:Injector = null):viewModule.AppView {\n    var parentView = viewContainerLocation.hostView;\n    var boundElementIndex:number = viewContainerLocation.boundElementIndex;\n    var view = this._createViewRecurse(protoView);\n    var renderViewRefs = this._renderer.createViewInContainer(this._getRenderViewContainerRef(parentView, boundElementIndex), atIndex, view.proto.render);\n    view.render = renderViewRefs[0];\n\n    this._utils.attachViewInContainer(parentView, boundElementIndex, atIndex, view);\n    this._utils.hydrateViewInContainer(parentView, boundElementIndex, atIndex, injector);\n    this._viewHydrateRecurse(view, renderViewRefs, 1);\n    return view;\n  }\n\n  destroyViewInContainer(viewContainerLocation:eli.ElementRef, atIndex:number) {\n    var parentView = viewContainerLocation.hostView;\n    var boundElementIndex:number = viewContainerLocation.boundElementIndex;\n    var viewContainer = parentView.viewContainers[boundElementIndex];\n    var view = viewContainer.views[atIndex];\n    this._viewDehydrateRecurse(view);\n    this._utils.detachViewInContainer(parentView, boundElementIndex, atIndex);\n    this._renderer.destroyViewInContainer(this._getRenderViewContainerRef(parentView, boundElementIndex), atIndex);\n    this._destroyView(view);\n  }\n\n  attachViewInContainer(viewContainerLocation:eli.ElementRef, atIndex:number, view:viewModule.AppView):viewModule.AppView {\n    var parentView = viewContainerLocation.hostView;\n    var boundElementIndex:number = viewContainerLocation.boundElementIndex;\n    this._utils.attachViewInContainer(parentView, boundElementIndex, atIndex, view);\n    this._renderer.insertViewIntoContainer(this._getRenderViewContainerRef(parentView, boundElementIndex), atIndex, view.render);\n    return view;\n  }\n\n  detachViewInContainer(viewContainerLocation:eli.ElementRef, atIndex:number):viewModule.AppView {\n    var parentView = viewContainerLocation.hostView;\n    var boundElementIndex:number = viewContainerLocation.boundElementIndex;\n    var viewContainer = parentView.viewContainers[boundElementIndex];\n    var view = viewContainer.views[atIndex];\n    this._utils.detachViewInContainer(parentView, boundElementIndex, atIndex);\n    this._renderer.detachViewFromContainer(this._getRenderViewContainerRef(parentView, boundElementIndex), atIndex);\n    return view;\n  }\n\n  _getRenderViewContainerRef(parentView:viewModule.AppView, boundElementIndex:number) {\n    return new RenderViewContainerRef(parentView.render, boundElementIndex);\n  }\n\n  _createViewRecurse(protoView:viewModule.AppProtoView) {\n    var view = this._viewPool.getView(protoView);\n    if (isBlank(view)) {\n      view = this._utils.createView(protoView, this, this._renderer);\n      var binders = protoView.elementBinders;\n      for (var binderIdx = 0; binderIdx < binders.length; binderIdx++) {\n        var binder = binders[binderIdx];\n        if (binder.hasStaticComponent()) {\n          var childView = this._createViewRecurse(binder.nestedProtoView);\n          this._utils.attachComponentView(view, binderIdx, childView);\n        }\n      }\n    }\n    return view;\n  }\n\n  _destroyView(view:viewModule.AppView) {\n    this._viewPool.returnView(view);\n  }\n\n  _viewHydrateRecurse(\n      view:viewModule.AppView,\n      renderComponentViewRefs:List<ViewRef>,\n      renderComponentIndex:number):number {\n    this._renderer.setEventDispatcher(view.render, view);\n\n    var binders = view.proto.elementBinders;\n    for (var i = 0; i < binders.length; ++i) {\n      if (binders[i].hasStaticComponent()) {\n        var childView = view.componentChildViews[i];\n        childView.render = renderComponentViewRefs[renderComponentIndex++];\n        this._utils.hydrateComponentView(view, i);\n        renderComponentIndex = this._viewHydrateRecurse(\n          view.componentChildViews[i],\n          renderComponentViewRefs,\n          renderComponentIndex\n        );\n      }\n    }\n    return renderComponentIndex;\n  }\n\n  _viewDehydrateRecurse(view:viewModule.AppView) {\n    this._utils.dehydrateView(view);\n    var binders = view.proto.elementBinders;\n    for (var i = 0; i < binders.length; i++) {\n      var componentView = view.componentChildViews[i];\n      if (isPresent(componentView)) {\n        this._viewDehydrateRecurse(componentView);\n        if (binders[i].hasDynamicComponent()) {\n          this._utils.detachComponentView(view, i);\n          this._destroyView(componentView);\n        }\n      }\n      var vc = view.viewContainers[i];\n      if (isPresent(vc)) {\n        for (var j = vc.views.length - 1; j >= 0; j--) {\n          var childView = vc.views[j];\n          this._viewDehydrateRecurse(childView);\n          this._utils.detachViewInContainer(view, i, j);\n          this._destroyView(childView);\n        }\n      }\n    }\n\n    // imperativeHostViews\n    for (var i = 0; i < view.imperativeHostViews.length; i++) {\n      var hostView = view.imperativeHostViews[i];\n      this._viewDehydrateRecurse(hostView);\n      this._utils.detachInPlaceHostView(view, hostView);\n      this._destroyView(hostView);\n    }\n    view.render = null;\n  }\n}"]}