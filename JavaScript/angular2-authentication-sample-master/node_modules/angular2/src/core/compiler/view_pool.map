{"version":3,"sources":["view_pool.js"],"names":[],"mappings":"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","file":"angular2/src/core/compiler/view_pool.js","sourcesContent":["import {Inject, OpaqueToken} from 'angular2/di';\nimport {ListWrapper, MapWrapper, Map, List} from 'angular2/src/facade/collection';\nimport {isPresent, isBlank} from 'angular2/src/facade/lang';\n\nimport * as viewModule from './view';\n\n\n// TODO(tbosch): Make this an OpaqueToken as soon as our transpiler supports this!\nexport const APP_VIEW_POOL_CAPACITY = 'AppViewPool.viewPoolCapacity';\n\nexport class AppViewPool {\n  _poolCapacityPerProtoView:number;\n  _pooledViewsPerProtoView:Map<viewModule.AppProtoView, List<viewModule.AppView>>;\n\n  constructor(@Inject(APP_VIEW_POOL_CAPACITY) poolCapacityPerProtoView) {\n    this._poolCapacityPerProtoView = poolCapacityPerProtoView;\n    this._pooledViewsPerProtoView = MapWrapper.create();\n  }\n\n  getView(protoView:viewModule.AppProtoView):viewModule.AppView {\n    var pooledViews = MapWrapper.get(this._pooledViewsPerProtoView, protoView);\n    if (isPresent(pooledViews) && pooledViews.length > 0) {\n      return ListWrapper.removeLast(pooledViews);\n    }\n    return null;\n  }\n\n  returnView(view:viewModule.AppView) {\n    var protoView = view.proto;\n    var pooledViews = MapWrapper.get(this._pooledViewsPerProtoView, protoView);\n    if (isBlank(pooledViews)) {\n      pooledViews = [];\n      MapWrapper.set(this._pooledViewsPerProtoView, protoView, pooledViews);\n    }\n    if (pooledViews.length < this._poolCapacityPerProtoView) {\n      ListWrapper.push(pooledViews, view);\n    }\n  }\n\n}"]}