window.addEventListener("load",function(){"use strict";function e(e){var n=require("ace/edit_session").EditSession,t=require("ace/undomanager").UndoManager,o=require("ace/virtual_renderer").VirtualRenderer,r=require("ace/editor").Editor,a=require("ace/multi_select").MultiSelect,s=require("ace/layer/gutter"),i=new o(e);e.style.overflow="hidden",i.screenToTextCoordinates=function(e,n){var t=this.pixelToScreenCoordinates(e,n);return this.session.screenToDocumentPosition(Math.min(this.session.getScreenLength()-1,Math.max(t.row,0)),Math.max(t.column,0))},i.$maxLines=4;var c=new r(i);return new a(c),c.session.setUndoManager(new t),c.setShowPrintMargin(!1),c.renderer.setShowGutter(!0),c.renderer.setHighlightGutterLine(!1),c.$mouseHandler.$focusWaitTimeout=0,c}function n(){function e(){if(r=o.getValue(),""===r)return void n('<p class="warning">Please enter a message');try{t.send(r),n('<p class="event">Sent: '+r)}catch(e){n('<p class="warning">')}o.setValue(r+"\n")}function n(e){$("#chatLog").append(e+"</p>")}var t,r,a="ws://localhost:8001";try{t=new WebSocket(a),n('<p class="event">Socket Status: '+t.readyState),t.onopen=function(){n('<p class="event">Socket Status: '+t.readyState+" (open)")},t.onmessage=function(e){n('<p class="message">Received: '+e.data)},t.onclose=function(){n('<p class="event">Socket Status: '+t.readyState+" (Closed)")}}catch(s){n("<p>Error"+s)}o.commands.addCommand({name:"myCommand",bindKey:{win:"Enter",mac:"Enter"},exec:function(n){e()},readOnly:!0}),$("#disconnect").click(function(){t.close()})}var t=document.getElementById("editor"),o=e(t);o.setTheme("ace/theme/twilight"),o.$blockScrolling=1/0,o.commands.bindKeys({"Shift-Return|Ctrl-Return|Alt-Return":function(e){e.insert("\n")},"Esc|Shift-Esc":function(e){e.editor.focus()},Return:function(e){var n=e.getValue().split(/\s+/),t=e.editor;t.commands.exec(n[0],t,n[1]),t.focus()}}),o.commands.removeCommands(["find","gotoline","findall","replace","replaceall"]),window.hasOwnProperty("WebSocket")?n():console.log("No websockets"),window.editor=o});